<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>GIBench 模型榜 | Endoscopy VQA Benchmark</title>
    <link
      rel="stylesheet"
      href="assets/css/gibench.css"
    />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div class="hero-main">
          <div class="hero-kicker">Endoscopy VQA</div>
          <h1 id="hero-title">GIBench 模型榜</h1>
          <p id="hero-desc">
            多模态消化内镜 VQA 基准：Q1 解剖定位、Q2 病变定位、Q3 诊断选择、Q4 看图说话 与 Q5
            后续建议，支持模型间与人机对比两种视图。
          </p>
          <div class="tags">
            <span class="tag tag--primary">ENDOSCOPY VQA</span>
            <span class="tag">Q1 ANATOMICAL</span>
            <span class="tag">Q2 LOCALIZATION</span>
            <span class="tag">Q3 DIAGNOSIS</span>
            <span class="tag">Q4 FINDINGS</span>
            <span class="tag">Q5 RECOMMENDATION</span>
          </div>
        </div>
        <div class="hero-stats">
          <div class="stat-card">
            <div class="stat-label" id="stat-disease-label">病变类型</div>
            <div class="stat-value">
              <span id="stat-disease-value">20</span>
            </div>
            <div class="stat-sub" id="stat-disease-sub">食管 / 胃 / 结直肠</div>
          </div>
          <div class="stat-card">
            <div class="stat-label" id="stat-image-label">图像与题目</div>
            <div class="stat-value">
              <span id="stat-image-value">947</span>
            </div>
            <div class="stat-sub" id="stat-image-sub">20类病变，Q1-Q5 评估</div>
          </div>
          <div class="stat-card">
            <div class="stat-label" id="stat-eval-label">Likert评估主体</div>
            <div class="stat-value">
              <span id="stat-eval-value">3 + 1</span>
            </div>
            <div class="stat-sub" id="stat-eval-sub">3 名专科医生 + LLM 裁判</div>
          </div>
          <div class="stat-card">
            <div class="stat-label" id="stat-model-label">模型数量</div>
            <div class="stat-value">
              <span id="stat-model-value">12</span>
            </div>
            <div class="stat-sub" id="stat-model-sub">商业 / 医疗开源 / 开源</div>
          </div>
        </div>
      </header>

      <div class="header-row">
        <div
          class="tabs"
          role="tablist"
          aria-label="视图切换"
        >
          <button
            type="button"
            class="tab-button is-active"
            data-tab="model"
          >
            <span id="tab-label-model">模型榜</span>
          </button>
          <button
            type="button"
            class="tab-button"
            data-tab="human"
          >
            <span id="tab-label-human">人机对比</span>
          </button>
        </div>
        <div class="lang-toggle" id="lang-toggle">
          <button type="button" class="lang-btn is-active" data-lang="zh">中文</button>
          <button type="button" class="lang-btn" data-lang="en">EN</button>
        </div>
        <div
          id="load-status"
          class="load-status"
        >
          等待加载 gibench_leaderboard.json…
        </div>
      </div>

      <main class="surface-main">
        <!-- 模型榜视图 -->
        <section
          id="tab-model"
          class="tab-panel is-active"
          aria-label="模型榜视图"
        >
          <div class="controls">
            <div class="controls-group">
              <span class="label" id="label-tasks">任务</span>
              <button
                class="pill-toggle is-active"
                type="button"
                disabled
              >
                <span id="task-pill-q1">Q1 解剖定位</span>
              </button>
              <button
                class="pill-toggle is-active"
                type="button"
                disabled
              >
                <span id="task-pill-q2">Q2 病变定位</span>
              </button>
              <button
                class="pill-toggle is-active"
                type="button"
                disabled
              >
                <span id="task-pill-q3">Q3 诊断选择</span>
              </button>
            </div>
            <div class="controls-group">
              <span class="label" id="label-sort">排序（示意）</span>
              <span class="select-wrap">
                <select
                  id="sort-select"
                  class="select"
                >
                  <option id="sort-opt-q1" value="q1">按 Q1 Macro-F1</option>
                  <option id="sort-opt-q2" value="q2">按 Q2 mIoU</option>
                  <option id="sort-opt-q3" value="q3">按 Q3 Macro-F1</option>
                </select>
              </span>
            </div>
          </div>

          <section class="card card--paired">
            <div class="paired-grid">
              <div class="card-pane">
                <div class="card-header">
                  <div class="card-title" id="card-title-ranking">模型整体排名</div>
                  <div class="card-subtitle" id="card-subtitle-ranking">
                    使用 Q1/Q2/Q3 指标生成的示意排序，具体加权方式请参考论文和文档。
                  </div>
                </div>
                <div class="table-wrapper">
                  <table>
                    <thead>
                      <tr>
                        <th>#</th>
                        <th id="table-col-model">模型</th>
                        <th>Q1 Macro-F1</th>
                        <th>Q2 mIoU</th>
                        <th>Q3 Macro-F1</th>
                      </tr>
                    </thead>
                    <tbody id="leaderboard-body"></tbody>
                  </table>
                </div>
              </div>
              <div class="card-pane card-pane--summary">
                <div class="card-header">
                  <div class="card-title" id="card-title-summary">当前模型概览</div>
                  <div
                    id="model-summary-name"
                    class="card-subtitle"
                  >
                    尚未选择模型。
                  </div>
                </div>
                <div
                  id="model-summary-metrics"
                  class="model-summary-metrics"
                ></div>
              </div>
            </div>
          </section>

          <section class="card card--detail">
            <div class="card-header">
              <div class="card-title" id="card-title-detail">按病变 / 区域细节</div>
              <div class="card-subtitle" id="card-subtitle-detail">
                选择子任务与病变，对比所有模型在对应指标下的表现。
              </div>
            </div>
            <div class="subtabs">
              <button
                type="button"
                class="subtab-btn is-active"
                data-subtab="q1"
              >
                <span id="subtab-q1">Q1 按病变</span>
              </button>
              <button
                type="button"
                class="subtab-btn"
                data-subtab="q2"
              >
                <span id="subtab-q2">Q2 按病变</span>
              </button>
              <button
                type="button"
                class="subtab-btn"
                data-subtab="q3"
              >
                <span id="subtab-q3">Q3 按区域</span>
              </button>
            </div>
            <div class="detail-controls">
              <span class="label" id="label-disease-select">病变选择</span>
              <span class="select-wrap">
                <select
                  id="detail-select"
                  class="select"
                ></select>
              </span>
              <span
                id="detail-selected-tip"
                class="detail-selected-tip"
              ></span>
            </div>
            <div
              id="detail-chart"
              class="bar-chart"
            ></div>
          </section>
        </section>

        <!-- 人机对比视图 -->
        <section
          id="tab-human"
          class="tab-panel"
          aria-label="人机对比视图"
        >
          <div class="controls">
            <div class="controls-group">
              <span class="label" id="label-scope">范围</span>
              <button
                class="pill-toggle is-active"
                type="button"
                disabled
              >
                <span id="scope-q1q3">Q1/Q2/Q3 选择题与定位</span>
              </button>
              <button
                class="pill-toggle is-active"
                type="button"
                disabled
              >
                <span id="scope-q4q5">Q4/Q5 简答题</span>
              </button>
            </div>
            <div class="controls-group">
              <span class="label" id="label-note">说明</span>
              <span class="controls-note" id="note-human-main">
                仅展示总体层面的⼈机差异，可在论文/补充材料中查看更细粒度分析。
              </span>
            </div>
          </div>

          <div class="cards-row">
            <section class="card" id="hvm-q1q3-card">
              <div class="summary-title" id="hvm-q1q3-title">Q1/Q3 选择题（Macro-F1）</div>
              <div class="summary-row">
                <span id="hvm-q1q3-doctor-label">医生（平均）</span>
                <span id="hvm-q1q3-doctor-value">–</span>
              </div>
              <div class="summary-bar-track">
                <div
                  id="hvm-q1q3-doctor-bar"
                  class="summary-bar summary-bar-human"
                ></div>
              </div>
              <div class="summary-row">
                <span id="hvm-q1q3-model-label">最佳模型</span>
                <span id="hvm-q1q3-model-value">–</span>
              </div>
              <div class="summary-bar-track">
                <div
                  id="hvm-q1q3-model-bar"
                  class="summary-bar summary-bar-model"
                ></div>
              </div>
              <div
                id="hvm-q1q3-note"
                class="summary-note"
              >
                基于宏平均 F1（总体）。
              </div>
            </section>

            <section class="card" id="hvm-q2-card">
              <div class="summary-title" id="hvm-q2-title">Q2 病变定位（mIoU）</div>
              <div class="summary-row">
                <span id="hvm-q2-doctor-label">医生（平均）</span>
                <span id="hvm-q2-doctor-value">–</span>
              </div>
              <div class="summary-bar-track">
                <div
                  id="hvm-q2-doctor-bar"
                  class="summary-bar summary-bar-human"
                ></div>
              </div>
              <div class="summary-row">
                <span id="hvm-q2-model-label">最佳模型</span>
                <span id="hvm-q2-model-value">–</span>
              </div>
              <div class="summary-bar-track">
                <div
                  id="hvm-q2-model-bar"
                  class="summary-bar summary-bar-model"
                ></div>
              </div>
              <div
                id="hvm-q2-note"
                class="summary-note"
              >
                基于总体 mIoU。
              </div>
            </section>

            <section class="card" id="hvm-q4q5-card">
              <div class="summary-title" id="hvm-q4q5-title">Q4/Q5 简答题（Likert 总分）</div>
              <div class="summary-row">
                <span id="hvm-q4q5-doctor-label">医生（平均）</span>
                <span id="hvm-q4q5-doctor-value">–</span>
              </div>
              <div class="summary-bar-track">
                <div
                  id="hvm-q4q5-doctor-bar"
                  class="summary-bar summary-bar-human"
                ></div>
              </div>
              <div class="summary-row">
                <span id="hvm-q4q5-model-label">最佳模型</span>
                <span id="hvm-q4q5-model-value">–</span>
              </div>
              <div class="summary-bar-track">
                <div
                  id="hvm-q4q5-model-bar"
                  class="summary-bar summary-bar-model"
                ></div>
              </div>
              <div
                id="hvm-q4q5-note"
                class="summary-note"
              >
                基于“看图说话 / 后续建议”两类问题的 Likert 总分。
              </div>
            </section>
          </div>

          <section class="card">
            <div class="case-header">
              <div>
                <div class="card-title" id="case-title">小样本人机案例走查（结构占位）</div>
                <div class="card-subtitle" id="case-subtitle">
                  当前版本仅提供总体指标，可在后续版本中将此区替换为具体病例级可视化。
                </div>
              </div>
            </div>
            <p class="case-placeholder" id="case-placeholder">
              这里预留给病例级对比展示（病变图像 + 医生答案 + 模型答案 + LLM 裁判评分）。当前阶段不做实现，仅保留结构占位，保证整体页面布局完整。
            </p>
          </section>
        </section>
      </main>

      <footer class="footer">
        <div>
          <span id="footer-method">
            方法概要：Q1/Q3 使用宏平均 F1，Q2 使用总体 mIoU 及按病变 IoU，Q4/Q5 使用 5 维 Likert 与
            LLM 裁判综合评分；人机对比基于统一抽样的病例子集。
          </span>
        </div>
        <div>
          <span id="footer-data">数据与代码：</span>
          <a href="gibench_leaderboard.json">gibench_leaderboard.json</a>
          ·
          <a href="generate_gibench_leaderboard.py">generate_gibench_leaderboard.py</a>
        </div>
      </footer>
    </div>

    <script
      type="module"
      src="assets/js/app.js"
    ></script>
  </body>
</html>
